<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>AI Poker Lab — Match History</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/web/app.css?v=5"/>
  <link rel="icon" href="/web/img/PokerBenchlogo.svg" type="image/svg+xml"/>
  <script>
    document.addEventListener('DOMContentLoaded', ()=>{
      document.querySelectorAll('.topnav a').forEach(a=>{ try{ if(location.pathname.endsWith(a.getAttribute('href').split('/').pop())) a.classList.add('active'); }catch(e){} });
    });
    const $ = s => document.querySelector(s);
    const fmt = n => n.toLocaleString();
    function row(m){
      const when = new Date(m.created_at).toLocaleString();
      const ended = m.ended_at ? new Date(m.ended_at).toLocaleString() : 'in progress';
      return `<tr>
        <td class="num">${m.id}</td>
        <td>${when}</td>
        <td>${ended}</td>
        <td><div>${m.model_a||'A'}</div><div class="sub">vs</div><div>${m.model_b||'B'}</div></td>
        <td class="num">${m.sb}/${m.bb}</td>
        <td class="num">${fmt(m.start_stack)}</td>
        <td class="num">${m.duel_seeds}</td>
        <td class="num"><a class="pill" href="/web/replay.html?match_id=${m.id}">Replay</a></td>
      </tr>`;
    }
    async function getJSON(url, fallback){
      try{ const r = await fetch(url); if(r.ok) return await r.json(); }catch(e){}
      if (fallback){ try{ const r2 = await fetch(fallback); if(r2.ok) return await r2.json(); }catch(e){} }
      return { rows: [] };
    }
    async function load(){
      const data = await getJSON('/api/matches', '/web/data/matches.json');
      const rows = data.rows || [];
      $('#tbody').innerHTML = rows.map(row).join('');
    }
    addEventListener('DOMContentLoaded', load);
  </script>
</head>
<body>
  <div class="wrap wrap--wide">
    <div class="topnav">
      <a class="brand" href="/web/index.html">
        <img src="/web/img/PokerBenchlogo.svg" alt="PokerBench logo">
      </a>
      <nav>
        <a class="pill" href="/web/leaderboard.html">Leaderboard</a>
        <a class="pill" href="/web/matrix.html">Matrix</a>
        <a class="pill" href="/web/elo.html">Elo</a>
        <a class="pill" href="/web/replay.html">Replay</a>
        <a class="pill" href="/web/history.html">History</a>
        <a class="pill" href="/web/about.html">About</a>
      </nav>
    </div>

    <div class="card" style="display:flex; align-items:center; justify-content:space-between; gap:12px">
      <div>
        <h1>Match History</h1>
        <div class="muted">Select a match to watch its replay.</div>
      </div>
    </div>

    <div class="card">
      <table>
        <thead>
          <tr>
            <th class="num">ID</th>
            <th>Created</th>
            <th>Ended</th>
            <th>Models</th>
            <th class="num">Blinds</th>
            <th class="num">Start</th>
            <th class="num">Pairs</th>
            <th class="num">Replay</th>
          </tr>
        </thead>
        <tbody id="tbody"><tr><td colspan="8">Loading…</td></tr></tbody>
      </table>
    </div>
  </div>
</body>
</html>




