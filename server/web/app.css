/* =====================================================================
   AI Poker Lab - Pro Theme (clean rewrite)
   ===================================================================== */

/* 0) Design Tokens ---------------------------------------------------- */
@import url('https://fonts.googleapis.com/css2?family=Syne+Mono&display=swap');

:root {
  /* Core swatches - Updated color scheme */
  --yinmn:   #2D5AA0;
  --powder:  #87CEEB;
  --cyan-l:  #F0F8FF;
  --sienna:  #FF6B35;
  --gun:     #1A1A2E;

  /* Neutral slate scale (used all over the CSS) */
  --slate-1: hsl(220 25% 8%);
  --slate-2: hsl(220 25% 10%);
  --slate-3: hsl(220 25% 12%);
  --slate-4: hsl(220 25% 14%);
  --slate-5: hsl(220 25% 18%);
  --slate-6: hsl(220 25% 22%);
  --slate-7: hsl(220 25% 26%);
  --slate-8: hsl(220 25% 30%);
  --slate-12:hsl(220 15% 96%);

  /* Semantic mapping - Updated background colors */
  --bg:        #16213E;
  --bg-2:      #0F1419;
  --surface:   var(--gun);
  --surface-2: #252547;
  --overlay:   rgba(26, 26, 46, .9);
  --border:    #3A3A5C;
  --line:      #4A4A6E;
  --text:      #E8F4F8;
  --muted:     var(--powder);

  --accent:    var(--sienna);
  --accent-2:  var(--yinmn);

  /* Status */
  --ok-9:   #3BD49C;
  --ok-11:  #B6F1D8;
  --warn-9: #F3B24F;
  --warn-11:#F8E0B8;
  --err-9:  #F06464;
  --err-11: #F7C2C2;

  /* Radii, shadows, motion */
  --radius-2: 10px;
  --radius-3: 14px;
  --radius-4: 18px;
  --shadow-1: 0 10px 22px rgba(0,0,0,.38);
  --shadow-2: 0 14px 36px rgba(0,0,0,.48);
  --shadow-inset: inset 0 0 0 1px rgba(255,255,255,.03);
  --ring: 0 0 0 3px rgba(255,107,53,.28);

  /* Spacing */
  --sp-1: .25rem; --sp-2: .5rem; --sp-3: .75rem; --sp-4: 1rem;
  --sp-5: 1.25rem; --sp-6: 1.5rem; --sp-7: 2rem; --sp-8: 2.5rem; --sp-9: 3rem;

  /* Type */
  --font-sans: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  --fs-1: clamp(.82rem, .78rem + .22vw, .95rem);
  --fs-2: clamp(.96rem, .9rem + .3vw, 1.06rem);
  --fs-3: clamp(1.08rem, 1.02rem + .45vw, 1.22rem);
  --fs-4: clamp(1.28rem, 1.14rem + .75vw, 1.6rem);
  --fs-5: clamp(1.6rem, 1.36rem + 1vw, 2rem);

  --ease-1: cubic-bezier(.22,1,.36,1);
  --ease-2: cubic-bezier(.2,.8,.2,1);
  --dur-1: .14s; --dur-2: .22s; --dur-3: .34s;

  /* Playing card theme */
  --card-darkBg:  #ffcc33;
  --card-lightBg: #fff3ce;
  --card-darkRed: #e22929;
  --card-lightRed:#ffd0d0;
  --card-darkBlk: #000000;
  --card-lightBlk:#777777;
  --card-w: 150px;
  --card-h: 200px;
}

/* 1) Base ------------------------------------------------------------- */
* { box-sizing: border-box; }
html, body {
  margin: 0;
  color: var(--text);
  background:
    radial-gradient(1400px 840px at 5% 0%,  color-mix(in oklab, var(--accent-2) 40%, transparent), transparent 65%),
    radial-gradient(1400px 840px at 100% 20%, color-mix(in oklab, var(--accent) 38%, transparent), transparent 60%),
    radial-gradient(1200px 720px at 50% 90%, color-mix(in oklab, var(--powder) 28%, transparent), transparent 65%),
    linear-gradient(180deg, var(--bg-2), var(--bg));
  background-attachment: fixed;
  font: var(--fs-2)/1.6 var(--font-sans);
  overflow-x: hidden;
}
body::before {
  content: "";
  position: fixed; inset: -20%; z-index: -1; pointer-events: none;
  background:
    radial-gradient(1100px 620px at 12% 12%, color-mix(in oklab, var(--accent-2) 45%, transparent), transparent 62%),
    radial-gradient(1100px 620px at 88% 86%, color-mix(in oklab, var(--accent) 42%, transparent), transparent 58%),
    radial-gradient(900px 520px at 50% 50%,  color-mix(in oklab, var(--powder) 32%, transparent), transparent 62%);
  filter: blur(36px) saturate(1.25);
  opacity: .85;
  transform: translate3d(0,0,0) scale(1.06);
  animation: bgfloat 30s var(--ease-1) infinite alternate;
}
body::after {
  content: "";
  position: fixed; inset: -10%; z-index: -1; pointer-events: none;
  background:
    radial-gradient(600px 360px at 20% 80%, color-mix(in oklab, var(--accent-2) 32%, transparent), transparent 62%),
    radial-gradient(520px 300px at 80% 30%, color-mix(in oklab, var(--accent) 28%, transparent), transparent 60%);
  filter: blur(48px) saturate(1.18);
  opacity: .6;
  animation: bgspin 48s linear infinite;
}
@keyframes bgspin { from { transform: rotate(0deg) scale(1.02); } to { transform: rotate(360deg) scale(1.02); } }
@keyframes bgfloat {
  0%   { transform: translate3d(-18px, -10px, 0) scale(1.08); }
  50%  { transform: translate3d( 12px,  16px, 0) scale(1.11); }
  100% { transform: translate3d( -8px,  22px, 0) scale(1.08); }
}
img, svg, video, canvas, audio, iframe, embed, object { display: block; }
a, a:visited { color: inherit; text-decoration: none; }
button, input, select, textarea { font: inherit; color: inherit; }
:focus-visible { outline: none; box-shadow: var(--ring); border-color: transparent; }

.muted { color: var(--muted); }
.mono  { font-family: var(--font-mono); }

.org-icon {
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}
.org-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
.org-icon svg {
  width: 100%;
  height: 100%;
  display: block;
}
.org-icon.org-icon--dot {
  width: 14px;
  height: 14px;
  border-radius: 6px;
  background: linear-gradient(135deg, rgba(106, 160, 255, .9), rgba(159, 210, 255, 1));
  box-shadow: 0 0 0 1px rgba(255, 255, 255, .28);
}

h1 { font-size: var(--fs-5); line-height: 1.2; margin: 0 0 var(--sp-2); letter-spacing: .2px; }
h2 { font-size: var(--fs-4); line-height: 1.25; margin: 0 0 var(--sp-2); }
h3 { font-size: var(--fs-3); line-height: 1.3; margin: 0 0 var(--sp-1); }
p  { margin: var(--sp-2) 0; }
code { background: hsl(0 0% 100% / .04); border: 1px solid hsl(0 0% 100% / .06); padding: 2px 6px; border-radius: 6px; }
pre { background: var(--slate-3); border: 1px solid var(--border); border-radius: 10px; padding: var(--sp-4); overflow:auto; }

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; animation: none !important; }
}

/* 2) Layout ----------------------------------------------------------- */
.wrap { width: min(1600px, calc(100vw - 48px)); margin: 32px auto; display: grid; gap: 24px; }
.wrap--wide { width: min(1920px, calc(100vw - 56px)); margin: 24px auto 64px; }
@media (max-width: 1024px) {
  .wrap--wide { width: min(100%, calc(100vw - 32px)); margin: 20px auto 40px; }
}
@media (max-width: 640px) {
  .wrap--wide { width: min(100%, calc(100vw - 24px)); margin: 16px auto 32px; }
}
.row  { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
@media (max-width: 900px) { .row { grid-template-columns: 1fr; } }
.section, .stack { display: grid; gap: var(--sp-3); }
.cluster { display: flex; gap: var(--sp-2); align-items: center; flex-wrap: wrap; }
.center  { display:grid; place-items:center; }

/* 3) Surfaces / Cards ------------------------------------------------- */
.card {
  background:
    linear-gradient(180deg, hsl(240 15% 16% / .85), hsl(240 15% 14% / .9)),
    radial-gradient(800px 400px at 10% -10%, rgba(45,90,160,.08), transparent 55%);
  border: 1px solid var(--border);
  border-radius: var(--radius-2);
  padding: 20px;
  box-shadow: var(--shadow-1);
  transition: transform var(--dur-1) var(--ease-2), box-shadow var(--dur-1) var(--ease-2), border-color var(--dur-1) var(--ease-2);
}
.card:hover { transform: translateY(-1px); box-shadow: var(--shadow-2); border-color: hsl(240 20% 40%); }
.card.ghost { background: hsl(240 15% 14% / .55); backdrop-filter: blur(6px); }
.card.tight { padding: 12px; }
.card.spacious { padding: 26px; border-radius: var(--radius-3); }

.panel { background: hsl(240 15% 14%); border:1px solid var(--border); border-radius: var(--radius-2); padding: 14px; box-shadow: var(--shadow-inset); }
.footer { color: var(--muted); font-size: var(--fs-1); text-align: center; padding: 8px; }

/* 4) Top Navigation --------------------------------------------------- */
.topnav {
  position: sticky; top: 0; left: 0; right: 0; z-index: 40;
  display: flex; align-items: center; justify-content: space-between; gap: 12px;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(26,26,46,.94), rgba(22,33,62,.94));
  backdrop-filter: blur(6px);
  box-shadow: 0 6px 12px rgba(0,0,0,.35);
}
.brand { font-weight: 900; letter-spacing: .2px; }
.brand .dot { display:inline-block; width:8px; height:8px; border-radius:999px; background: var(--accent); margin-left:6px; box-shadow: 0 0 0 2px rgba(255,107,53,.25); }
.topnav nav { display: flex; gap: 8px; align-items: center; }
.topnav a {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 12px; border: 1px solid transparent; border-radius: 6px; color: var(--text);
  font-weight: 700; background: transparent; position: relative;
}
.topnav a::after {
  content: ""; position: absolute; left: 12px; right: 12px; bottom: 6px; height: 2px;
  background: linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius: 2px;
  transform: scaleX(0); transform-origin: left; transition: transform var(--dur-2) var(--ease-2);
}
.topnav a:hover::after, .topnav a.active::after { transform: scaleX(1); }
.topnav a:focus-visible { box-shadow: var(--ring); border-color: color-mix(in oklab, var(--accent-2) 30%, var(--border)); }

/* 5) Controls (pills/buttons) ---------------------------------------- */
.pill, .btn {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 6px 12px; border-radius: 6px; font-weight: 700; letter-spacing: .1px;
  border: 1px solid hsl(240 25% 30%); background: hsl(240 25% 14%); color: var(--text); text-decoration: none;
  transition: background var(--dur-2) var(--ease-2), box-shadow var(--dur-2) var(--ease-2), transform var(--dur-1) var(--ease-2), border-color var(--dur-2) var(--ease-2);
}
.pill:hover { background: hsl(240 25% 12%); border-color: hsl(240 28% 34%); }
.pill:focus-visible, .btn:focus-visible { box-shadow: var(--ring); }

.btn {
  border-color: transparent;
  background: linear-gradient(90deg, var(--accent), var(--accent-2));
  color: hsl(240 30% 8%); box-shadow: 0 8px 18px hsl(200 80% 50% / .28);
}
.btn:hover { transform: translateY(-1px); box-shadow: 0 12px 24px hsl(200 80% 50% / .32); }
.btn:active { transform: none; filter: brightness(.98); }

.btn.ghost { background: transparent; color: var(--text); border: 1px solid var(--border); }
.btn.ghost:hover { background: var(--slate-4); border-color: hsl(240 28% 34%); }

.btn.secondary { background: linear-gradient(90deg, var(--slate-7), var(--slate-8)); color: var(--slate-12); }
.btn.danger { background: linear-gradient(90deg, var(--err-9), hsl(345 85% 56%)); color: #fff; }
.btn.warn   { background: linear-gradient(90deg, var(--warn-9), hsl(32 94% 58%)); color: #1d1200; }
.btn.ok     { background: linear-gradient(90deg, var(--ok-9), hsl(152 60% 52%)); color: #001a12; }
.pill.ok    { border-color: transparent; background: linear-gradient(90deg, var(--ok-9), hsl(152 60% 52%)); color: #001a12; }

.btn.sm { padding: 4px 10px; font-weight: 600; }
.btn.lg { padding: 10px 16px; border-radius: var(--radius-3); }

/* 6) Forms ------------------------------------------------------------ */
input[type=text], input[type=number], input[type=email], input[type=password], select, textarea {
  background: hsl(240 25% 14%); color: var(--text); border: 1px solid var(--border);
  border-radius: 8px; padding: 8px 12px; transition: border-color var(--dur-2) var(--ease-2), box-shadow var(--dur-2) var(--ease-2), background var(--dur-2) var(--ease-2);
}
input::placeholder, textarea::placeholder { color: hsl(240 10% 60%); }
input:focus, select:focus, textarea:focus { border-color: hsl(240 28% 34%); box-shadow: var(--ring); background: hsl(240 25% 12%); }
select { background: var(--slate-3); }

/* 7) Tables / Leaderboard --------------------------------------------- */
.table-wrap { border:1px solid var(--border); border-radius: 12px; overflow:hidden; background: hsl(240 15% 13%); box-shadow: var(--shadow-1); }
table { width: 100%; border-collapse: separate; border-spacing: 0; }
th, td { padding: 12px 12px; border-bottom: 1px solid var(--line); text-align: left; vertical-align: middle; }
thead th { position: sticky; top: 0; background: hsl(240 15% 14%); color: var(--muted); font-weight: 900; z-index: 1; letter-spacing: .25px; }
thead th:first-child { text-align: right; }
thead th:first-child, tbody td:first-child { width: 56px; }
tbody tr:nth-child(odd) { background: hsl(0 0% 100% / .02); }
tbody tr:hover { background: color-mix(in oklab, var(--accent) 12%, transparent); }
.num { text-align: right; font-variant-numeric: tabular-nums; }
.sub { color: var(--muted); font-size: var(--fs-1); }

tbody td:nth-child(2) > div:first-child { display: flex; align-items: center; gap: 8px; }
tbody td:nth-child(2) > .sub { margin-top: 2px; }
tr.clickable { cursor: pointer; position: relative; }
tr.clickable .rowlink { text-decoration: underline; text-underline-offset: 2px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 46ch; display: inline-block; }
tr.clickable::before { content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 0; background: linear-gradient(180deg, var(--accent), var(--accent-2)); transition: width var(--dur-2) var(--ease-2); opacity: .75; }
tr.clickable:hover::before { width: 2px; }

/* Leaderboard layout hardening */
table.leaderboard { table-layout: fixed; }
table.leaderboard th, 
table.leaderboard td { overflow: hidden; text-overflow: ellipsis; }
table.leaderboard th.num,
table.leaderboard td.num { white-space: nowrap; font-variant-numeric: tabular-nums; }
table.leaderboard td.num .rd { display: block; text-align: right; margin-top: 2px; line-height: 1.1; }
table.leaderboard td.updated, 
table.leaderboard th.updated { white-space: nowrap; }

@media (max-width: 800px) {
  table.leaderboard col:nth-child(4) { width: 140px !important; }
  table.leaderboard col:nth-child(5),
  table.leaderboard col:nth-child(6) { width: 96px !important; }
  table.leaderboard col:nth-child(7) { width: 180px !important; }
}

/* 8) Bars / meters ---------------------------------------------------- */
.bar { height: 9px; background: hsl(240 25% 12%); border-radius: 6px; overflow: hidden; border: 1px solid var(--border); }
.bar > span { display: inline-block; height: 100%; }
.check { background: hsl(210 90% 66%); }
.call  { background: hsl(199 90% 70%); }
.raise { background: hsl(152 60% 52%); }
.fold  { background: var(--err-9); }

.meter { height: 8px; background: hsl(240 25% 12%); border: 1px solid var(--border); border-radius: 999px; overflow: hidden; }
.meter > span { display: block; height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); }

/* 9) Charts ----------------------------------------------------------- */
#chart { height: 320px; background:
  linear-gradient(#1a1a2e 0 0),
  linear-gradient(transparent, transparent),
  repeating-linear-gradient(0deg, rgba(135,206,235,.08) 0 24px, transparent 24px 48px),
  repeating-linear-gradient(90deg, rgba(45,90,160,.08) 0 40px, transparent 40px 80px);
  border: 1px solid var(--border); border-radius: 10px;
}
#chart path { stroke-linecap: round; stroke-linejoin: round; filter: drop-shadow(0 0 1px rgba(0,0,0,.35)); }
#chart path:nth-of-type(1){ stroke: var(--accent); }
#chart path:nth-of-type(2){ stroke: var(--accent-2); }
#chart circle { fill: hsl(240 60% 96%); stroke: rgba(0,0,0,.35); stroke-width: .5; }
#legend { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 8px; }
#legend .pill { border-color: hsl(240 25% 30%); background: hsl(240 25% 14%); }
svg text { fill: hsl(240 20% 56%); font-family: var(--font-sans); }
/* 10) Poker Replay Table ---------------------------------------------- */
.table { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; align-items: center; justify-items: center; padding: 12px; }

/* Leaderboard v2 (namespaced: lb-*) --------------------------------- */
.lb-card {
  padding: 0;
  border-radius: 28px;
  border: 1px solid rgba(118, 177, 255, .24);
  background:
    radial-gradient(140% 160% at 95% 0%, rgba(77, 246, 180, .18), transparent 64%),
    radial-gradient(120% 150% at 8% 0%, rgba(118, 177, 255, .18), transparent 70%),
    linear-gradient(180deg, rgba(12, 20, 38, .96), rgba(8, 14, 28, .94));
  box-shadow: 0 38px 74px rgba(4, 12, 24, .56);
  backdrop-filter: blur(8px);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.lb-card__header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 24px;
  padding: 32px 40px 28px;
  background: linear-gradient(180deg, rgba(8, 16, 30, .9), rgba(8, 14, 26, .78));
  border-bottom: 1px solid rgba(118, 177, 255, .28);
}
.lb-card__header h1 { margin-bottom: 8px; }
.lb-card__body {
  padding: 0 40px 40px;
  display: flex;
  flex-direction: column;
  gap: 28px;
}
.lb-table-wrap {
  border-radius: 24px;
  border: 1px solid rgba(118, 177, 255, .26);
  background: linear-gradient(180deg, rgba(8, 16, 30, .92), rgba(6, 12, 24, .94));
  box-shadow: 0 32px 60px rgba(4, 12, 24, .48);
  overflow: auto;
  scrollbar-color: rgba(118, 177, 255, .45) rgba(10, 20, 34, .6);
}
.lb-table {
  width: 100%;
  min-width: 1100px;
  border-collapse: collapse;
  table-layout: auto;
}
.lb-table th,
.lb-table td {
  padding: 18px 24px;
  border-bottom: 1px solid rgba(118, 177, 255, .16);
  vertical-align: middle;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.lb-table thead th {
  background: rgba(6, 14, 26, .82);
  color: rgba(210, 228, 255, .9);
  font-size: .8rem;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: .72px;
}
.lb-table tbody tr {
  background: rgba(10, 24, 46, .64);
}
.lb-table tbody tr:nth-child(even) {
  background: rgba(12, 28, 52, .58);
}
.lb-table tbody tr:hover {
  background: linear-gradient(90deg, rgba(118, 177, 255, .28), rgba(77, 246, 180, .24));
}
.lb-table .num {
  text-align: right;
  font-variant-numeric: tabular-nums;
}
.lb-table td { color: #f4f8ff; }
.lb-table .lb-model .name {
  color: #f8fbff;
  font-weight: 700;
}
.lb-table .lb-org .txt {
  color: rgba(206, 224, 255, .78);
  font-size: .78rem;
  letter-spacing: .2px;
}
.lb-table td .pill.ghost {
  color: #d6ecff;
  border-color: rgba(214, 236, 255, .35);
}
.lb-table th:nth-child(3),
.lb-table td:nth-child(3),
.lb-table th:nth-child(6),
.lb-table td:nth-child(6) {
  text-align: center;
}
.lb-table th.sortable {
  cursor: pointer;
  position: relative;
  padding-right: 18px;
}
.lb-table th.sortable::after {
  content: '⇅';
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  opacity: .72;
}
.lb-table th.sortable[data-dir="asc"]::after { content: '▲'; }
.lb-table th.sortable[data-dir="desc"]::after { content: '▼'; }
.lb-model {
  display: flex;
  align-items: center;
  gap: 14px;
  min-width: 0;
}
.lb-model .org-icon {
  width: 22px;
  height: 22px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: #9fd2ff;
}
.lb-model .org-icon img,
.lb-model .org-icon svg {
  width: 100%;
  height: 100%;
}
.lb-model .name {
  flex: 1;
  min-width: 0;
  text-decoration: none;
  color: inherit;
}
.lb-model .name:hover {
  text-decoration: underline;
  text-underline-offset: 2px;
}
.lb-dot {
  width: 14px;
  height: 14px;
  border-radius: 6px;
  background: linear-gradient(135deg, #6aa0ff, #9fd2ff);
  border: 1px solid rgba(255, 255, 255, .18);
}
.lb-badge {
  padding: 3px 6px;
  border-radius: 999px;
  border: 1px solid var(--border);
  font-size: 12px;
  color: var(--muted);
}
.lb-org {
  display: flex;
  align-items: center;
  gap: 10px;
  white-space: nowrap;
}
.lb-org .org-icon {
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: #9fd2ff;
}
.lb-org .org-icon img,
.lb-org .org-icon svg {
  width: 100%;
  height: 100%;
}
.lb-org .txt {
  color: rgba(206, 224, 255, .75);
  font-size: .75rem;
  letter-spacing: .18px;
}

@media (max-width: 1024px) { .lb-table-wrap { max-height: none; } }
@media (max-width: 720px) { .lb-table th:nth-child(6), .lb-table td:nth-child(6) { display: none; } }
@media (max-width: 600px) { .lb-table th:nth-child(4), .lb-table td:nth-child(4) { display: none; } }

/* Felt */
.felt {
  grid-column: 1 / 4;
  position: relative;
  width: 100%;
  border-radius: 999px;
  background:
    radial-gradient(520px 260px at 50% 28%, hsl(146 73% 48% / .96) 0%, hsl(149 63% 32% / .92) 62%),
    linear-gradient(180deg, hsl(150 52% 38%), hsl(150 58% 24%));
  border: 1px solid hsl(152 54% 32% / .58);
  padding: 24px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.1), inset 0 -18px 44px rgba(0,0,0,.22);
  color: #fafffd;
}
.felt::after { content:""; position:absolute; inset: 12px; border-radius: 999px; border: 1px dashed rgba(255,255,255,.22); pointer-events:none; }
.felt .muted,
.felt .stack-tag,
.felt .mono,
.felt .sb-zone .muted,
.felt .bb-zone .muted {
  color: #ffffff;
  font-weight: 700;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
}

.felt #caption {
  color: #e6fff3 !important;
  font-weight: 600;
  letter-spacing: .3px;
}

.felt .stack-tag {
  background: linear-gradient(180deg, rgba(9, 51, 27, .55), rgba(5, 34, 18, .7));
  border-color: rgba(255,255,255,.25);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12);
}

.felt .sb-zone,
.felt .bb-zone {
  background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(10,49,26,.35));
  border-color: rgba(255,255,255,.32);
}


/* ---- Cards (standard size; no overlap) ------------------------------ */
.cards { display:flex; gap:18px; align-items:center; justify-content:center; perspective:1000px; }
#board, #sb_hole, #bb_hole { min-height: var(--card-h); }

/* more space between board cards */
#board { gap: 20px; }

.cardx{
  /* knobs to control card face spacing */
  --corner-pad: 10px;        /* distance of rank corners from edges */
  --rank-size: 24px;         /* rank letter/number size */
  --glyph-size: 4.6em;       /* big center suit size */

  --tilt: 0deg;              /* 0 = back, 180 = front */
  width: var(--card-w); height: var(--card-h);
  border-radius: 12px; background:#0b0f13;
  position: relative; overflow: visible;
  display:grid; place-items:center;
  font-family:'Syne Mono', var(--font-sans);
  font-weight:700; letter-spacing:.2px; color: currentColor;
  transform-style: preserve-3d;
  transform: rotateY(var(--tilt));
  transition: transform .5s var(--ease-2);
}
/* no hover flip/shift */
.cardx:hover{ transform: rotateY(var(--tilt)); }

.cardx .face{
  position:absolute; inset:0; border-radius:12px;
  display:grid; place-items:center;
  -webkit-backface-visibility:hidden; backface-visibility:hidden;
}
.cardx .front{ background:#fff; font-size: var(--rank-size); transform: rotateY(180deg); color:inherit; }
.cardx .back{
  border:6px solid #fff;   /* standard frame */
  transform: rotateY(0deg);
  background: conic-gradient(
    var(--card-darkBg) 25%, var(--card-lightBg) 25%,
    var(--card-lightBg) 50%, var(--card-darkBg) 50%,
    var(--card-darkBg) 75%, var(--card-lightBg) 75%);
  background-size:20px 20px; border-radius:10px;
}

/* JS toggles .flip to reveal */
.cardx.flip{ --tilt: 180deg; }

/* Corners / ranks (pushed further from edges) */
.num-box{ position:absolute; width:20px; text-align:center; font-weight:800; color:inherit; line-height:1.05; }
.num-box.top{ top:var(--corner-pad); left:var(--corner-pad); }
.num-box.bottom{ bottom:var(--corner-pad); right:var(--corner-pad); transform: rotate(180deg); }
.num-box.suit::after{ display:block; font-size:1.15em; margin-top:0; }

/* Big center suit (slightly smaller so the face feels airier) */
.suit.main{ position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:var(--glyph-size); }
.suit.main::after{ content:""; color:transparent; -webkit-background-clip:text; background-clip:text; }

/* Suit colors + glyphs */
.spade,.club{ color: var(--card-darkBlk); }
.heart,.diamond{ color: var(--card-darkRed); }
.spade .suit::after{ content:'\2660'; } .heart .suit::after{ content:'\2665'; }
.diamond .suit::after{ content:'\2666'; } .club .suit::after{ content:'\2663'; }

/* Center suit gradients */
.spade .suit.main::after{   background-image: linear-gradient(135deg, var(--card-darkBlk) 50%, var(--card-lightBlk) 50%); }
.club  .suit.main::after{   background-image: linear-gradient(135deg, var(--card-darkBlk) 50%, var(--card-lightBlk) 50%); }
.heart .suit.main::after{   background-image: linear-gradient(135deg, var(--card-darkRed) 50%, var(--card-lightRed) 50%); }
.diamond .suit.main::after{ background-image: linear-gradient(135deg, var(--card-darkRed) 50%, var(--card-lightRed) 50%); }

/* Replay sizing + extra breathing room on smaller hole cards */
.card.replay{ --card-w: 150px; --card-h: 200px; --corner-pad: 10px; --rank-size: 24px; --glyph-size: 4.6em; }
.card.replay .sb-zone,
.card.replay .bb-zone{ --card-w: 150px; --card-h: 200px; --corner-pad: 10px; --rank-size: 24px; --glyph-size: 4.6em; }
.card.replay .sb-zone .cards,
.card.replay .bb-zone .cards{ gap: 20px; }

/* Larger cards on widescreen */
@media (min-width: 1400px){
  .card.replay{ --card-w: 160px; --card-h: 220px; --glyph-size: 4.8em; }
  .card.replay .sb-zone, .card.replay .bb-zone{ --card-w: 140px; --card-h: 200px; --glyph-size: 4.4em; }
}

/* ---- Playstyle grid tweaks (bigger squares, clean overrides) ------- */
.style-grid.lg{ grid-template-columns: repeat(2, 24px) !important; grid-auto-rows: 24px !important; gap: 8px !important; padding: 8px !important; }
.style-grid.lg .sq{ width: 24px !important; height: 24px !important; border-radius: 4px !important; }

/* ---- Tooltip polish (visibility, z-index, close button) ------------ */
#tip-pop.tooltip-pop{ position: absolute; z-index: 9999; pointer-events: auto; min-width: 260px; }
#tip-pop .close{ position:absolute; top:6px; right:8px; background:transparent; border:0; font-size:20px; line-height:1; cursor:pointer; color:var(--text) }
#tip-pop::after{ content:""; position:absolute; bottom:-8px; left:28px; border-width:8px; border-style:solid; border-color: var(--surface) transparent transparent transparent; filter: drop-shadow(0 2px 2px rgba(0,0,0,.25)); }

/* ===== Bot page styles moved from inline (to avoid conflicts) ===== */
.kvs{
  display:grid;
  grid-template-columns: auto 1fr auto 1fr auto 1fr;
  gap: 8px 12px;
  align-items:center;
}
@media (max-width:700px){ .kvs{ grid-template-columns: auto 1fr; } }

.tooltip-pop{
  position:absolute; display:none; min-width:240px; z-index:70;
  background:var(--surface); border:1px solid var(--border); border-radius:10px;
  box-shadow:var(--shadow-2); padding:12px 12px 10px 12px;
}
.tooltip-pop.show{ display:block; }
.tooltip-pop .title{ font-weight:800; margin:2px 20px 6px 0; }
.tooltip-pop .body{ color:var(--muted); font-size:var(--fs-1); }
.tooltip-pop .close{
  position:absolute; top:6px; right:8px;
  background:transparent; border:0; font-size:22px; line-height:1;
  cursor:pointer; color:var(--text)
}
.tooltip-pop .close:hover{ color: var(--muted); }
.num-sub{ color:#9fb3cd; font-size:12px; }

/* ===== Playstyle styling v2 (cooler look) =========================== */
#playstyle { --ps-bg: hsl(210 20% 14% / .6); --ps-border: hsl(210 22% 28%); }
#playstyle > div + div{ margin-top: 14px; }
#playstyle .style-grid.lg{ position:relative; background: var(--ps-bg); border:1px solid var(--ps-border); border-radius:12px; padding:10px; gap:10px !important; grid-template-columns: repeat(2, 26px) !important; grid-auto-rows: 26px !important; }
#playstyle .style-grid.lg::before{ content: attr(data-style); position:absolute; top:-16px; left:4px; font-weight:800; font-size:12px; color: var(--muted); letter-spacing:.4px; text-transform: uppercase; }
#playstyle .style-grid.lg .sq{ width:26px !important; height:26px !important; border-radius:6px !important; background: linear-gradient(135deg, hsl(210 20% 18%), hsl(210 20% 16%)); border:1px solid hsl(210 22% 28% / .6); box-shadow: inset 0 0 0 1px rgba(255,255,255,.03); transition: transform .18s var(--ease-2), box-shadow .18s var(--ease-2), filter .18s var(--ease-2); }
#playstyle .style-grid.lg .sq:hover{ transform: translateY(-1px); box-shadow: 0 6px 14px rgba(0,0,0,.22), inset 0 0 0 1px rgba(255,255,255,.05); }

/* highlight colors */
#playstyle .style-grid[data-style="LAG"]  .sq:nth-child(1){ background: linear-gradient(135deg, hsl(28 90% 58%), hsl(28 85% 50%)); filter: drop-shadow(0 0 6px hsl(28 90% 40% / .6)); }
#playstyle .style-grid[data-style="TAG"]  .sq:nth-child(2){ background: linear-gradient(135deg, hsl(152 60% 44%), hsl(152 58% 38%)); filter: drop-shadow(0 0 6px hsl(152 60% 36% / .55)); }
#playstyle .style-grid[data-style="FISH"] .sq:nth-child(3){ background: linear-gradient(135deg, hsl(2 72% 54%), hsl(2 72% 46%));   filter: drop-shadow(0 0 6px hsl(2 72% 42% / .55)); }
#playstyle .style-grid[data-style="NIT"]  .sq:nth-child(4){ background: linear-gradient(135deg, hsl(215 62% 56%), hsl(215 62% 46%)); filter: drop-shadow(0 0 6px hsl(215 62% 42% / .55)); }

/* Improve metrics line next to grid */
#playstyle .mono{ background: hsl(210 20% 12% / .6); border:1px solid hsl(210 22% 26%); border-radius: 999px; padding: 6px 10px; }

/* ---- Turn highlight (uses .focus-sb / .focus-bb via JS) ------------- */
.card.replay .sb-zone, .card.replay .bb-zone{
  transition: background .2s var(--ease-2), border-color .2s var(--ease-2), filter .2s var(--ease-2), opacity .2s var(--ease-2);
}
.card.replay.focus-sb #sbZone,
.card.replay.focus-bb #bbZone{
  background: linear-gradient(180deg, hsl(240 20% 18% / .85), hsl(240 20% 16% / .85));
  border-color: hsl(240 30% 38% / .7);
  filter: none; opacity: 1;
}
.card.replay.focus-sb #bbZone,
.card.replay.focus-bb #sbZone{
  opacity: .6; filter: saturate(.75);
}
/* Winner glow (strong, unmistakable) */
.card.replay .win-glow{
  position: relative;
  z-index: 2;
  border-color: #ffd166 !important;
  box-shadow:
    0 0 0 3px #ffd166,
    0 0 26px 4px #ffd166,
    0 0 52px 8px rgba(255,209,102,.35),
    inset 0 0 0 1px rgba(255,255,255,.06);
  animation: winPulse 1.2s var(--ease-1) 2;
}
/* Winner badge removed per feedback; keep strong glow only */
@keyframes winPulse {
  0% { box-shadow: 0 0 0 0 #ffd166, 0 0 0 0 #ffd166, 0 0 0 0 rgba(255,209,102,.35), inset 0 0 0 1px rgba(255,255,255,.06); }
  50%{ box-shadow: 0 0 0 5px #ffd166, 0 0 32px 6px #ffd166, 0 0 64px 10px rgba(255,209,102,.45), inset 0 0 0 1px rgba(255,255,255,.06); }
  100%{ box-shadow: 0 0 0 3px #ffd166, 0 0 26px 4px #ffd166, 0 0 52px 8px rgba(255,209,102,.35), inset 0 0 0 1px rgba(255,255,255,.06); }
}

/* Dealer name tag next to the chip */
.dealer-tag{
  position:absolute; top:6px; left:36px;
  font-weight:900; font-size:12px; color: var(--slate-12);
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}
#bbZone .dealer-tag{ left:auto; right:36px; text-align:right; }

/* Seats / pot + controls unchanged below ------------------------------ */
.stacks { display: flex; justify-content: space-between; align-items: center; margin-top: 14px; }
.stacks > div:nth-child(2) {
  display: inline-flex; align-items: center; gap: 8px;
  background: linear-gradient(180deg, hsl(200 80% 60% / .12), hsl(200 80% 60% / .06));
  border: 1px solid hsl(200 80% 60% / .28); border-radius: 999px;
  padding: 6px 10px; font-weight: 800; letter-spacing: .2px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05);
}
.stacks > div:nth-child(2)::before { content: ""; width: 10px; height: 10px; border-radius: 999px; background: var(--accent-2); box-shadow: 10px 0 0 var(--accent), 20px 0 0 #9be0c8; margin-right: 10px; }

.sb-zone, .bb-zone {
  display: grid; gap: 6px; min-width: 220px;
  background: linear-gradient(180deg, hsl(240 20% 13% / .65), hsl(240 20% 11% / .6));
  border: 1px solid hsl(240 20% 24% / .6); border-radius: 10px; padding: 8px 10px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
  position: relative;
}
.dealer { display:inline-grid; place-items:center; width:26px; height:26px; border-radius:999px; background:#fff; color:#111; font-weight:800; border:1px solid #ddd; box-shadow: 0 1px 2px rgba(0,0,0,.2); position:absolute; top:6px; left:6px; font-size:12px; line-height:1; letter-spacing:0; }
#bbZone .dealer { left:auto; right:6px; }
.dealer-move { animation: dealerHop .38s var(--ease-2); }
@keyframes dealerHop { 0% { transform: translateY(-4px); opacity:.8 } 100% { transform:none; opacity:1 } }

#caption { font-size: var(--fs-1); color: var(--muted); text-align: center; margin-bottom: 6px; }
.hand-banner { min-height: 22px; text-align: center; color: var(--muted); margin-bottom: 6px; }

.controls {
  grid-column: 1/4; display: grid; grid-template-columns: auto auto 1fr auto auto; gap: 10px; align-items: center;
  border-top: 1px solid var(--border); padding: 10px 10px 0; background: linear-gradient(180deg, hsl(0 0% 0% / .015), hsl(0 0% 0% / 0));
}
#log   { max-width: 48ch; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#count { font-variant-numeric: tabular-nums; }

.stack-tag { display:inline-flex; align-items:center; gap:6px; margin-top:6px; padding:4px 8px; border-radius:999px; font-weight:800; letter-spacing:.2px; background: linear-gradient(180deg, hsl(152 60% 20% / .25), hsl(152 60% 16% / .25)); border:1px solid hsl(152 60% 32% / .4); box-shadow: inset 0 0 0 1px rgba(255,255,255,.03); }


/* 11) Overlays -------------------------------------------------------- */
[data-tip] { position: relative; }
[data-tip]::after {
  content: attr(data-tip);
  position: absolute; left: 50%; bottom: calc(100% + 6px); transform: translateX(-50%);
  background: hsl(240 25% 14%); color: var(--text); border: 1px solid var(--border); border-radius: 8px;
  font-size: var(--fs-1); padding: 6px 8px; white-space: nowrap; opacity: 0; pointer-events: none; transition: opacity var(--dur-2) var(--ease-2);
}
[data-tip]:hover::after { opacity: 1; }

.dropdown { position: relative; display:inline-block; }
.dropdown-menu { position: absolute; top: calc(100% + 8px); right: 0; min-width: 220px; background: var(--surface); border: 1px solid var(--border); border-radius: 10px; padding: 6px; box-shadow: var(--shadow-2); display:none; }
.dropdown.open .dropdown-menu { display:block; }
.dropdown .item { padding: 8px 10px; border-radius: 6px; }
.dropdown .item:hover { background: var(--slate-4); }

.popover { position:absolute; z-index: 60; min-width: 260px; background: var(--surface); border:1px solid var(--border); border-radius: 10px; padding: 10px; box-shadow: var(--shadow-2); }

.dialog-backdrop { position:fixed; inset:0; background: hsl(240 20% 8% / .6); display:none; }
.dialog { position:fixed; inset: 10% auto auto 50%; transform: translateX(-50%); width: min(560px, 92vw); background: var(--surface); border:1px solid var(--border); border-radius: 12px; padding: 16px; box-shadow: var(--shadow-2); display:none; }
.dialog.open, .dialog-backdrop.open { display:block; }
.dialog .header { display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom: 10px; }
.dialog .footer { display:flex; justify-content:flex-end; gap:10px; margin-top: 10px; }

/* 12) Lists / badges / misc ------------------------------------------ */
.list { display:grid; gap:8px; }
.list .row { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px; border-radius:10px; border:1px solid var(--border); background: var(--slate-3); }
.list .row:hover { background: var(--slate-4); }

.avatar { --s: 28px; width: var(--s); height: var(--s); border-radius: 999px; background: linear-gradient(180deg, var(--slate-7), var(--slate-8)); display:grid; place-items:center; font-weight:800; color: var(--slate-12); border:1px solid var(--border); }

.badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; font-weight: 800; letter-spacing:.2px; }
.badge.ok    { background: hsl(152 60% 46% / .15); border: 1px solid hsl(152 60% 46% / .4); color: hsl(152 80% 88%); }
.badge.warn  { background: hsl(38 90% 56% / .15); border: 1px solid hsl(38 90% 56% / .35); color: hsl(45 90% 88%); }
.badge.err   { background: hsl(2 72% 56% / .15); border: 1px solid hsl(2 72% 56% / .35); color: hsl(2 88% 90%); }
.badge.neutral { background: hsl(240 25% 30% / .2); border: 1px solid hsl(240 25% 30% / .5); color: var(--slate-12); }

.chip { display:inline-flex; align-items:center; gap:6px; padding:4px 10px; background: var(--slate-4); border:1px solid var(--border); border-radius: 999px; }

/* 13) Skeletons / Alerts / KBD --------------------------------------- */
.skeleton { position: relative; background: hsl(240 20% 13%); overflow: hidden; border-radius: 8px; min-height: 12px; }
.skeleton::after { content: ""; position: absolute; inset: 0; transform: translateX(-100%); background: linear-gradient(90deg, transparent, hsl(0 0% 100% / .06), transparent); animation: shimmer 1.2s infinite; }
@keyframes shimmer { 100% { transform: translateX(100%); } }

.alert { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; border:1px solid var(--border); background: var(--slate-3); }
.alert.ok { border-color: hsl(152 60% 36%); }
.alert.warn { border-color: hsl(38 90% 46%); }
.alert.err { border-color: hsl(2 72% 46%); }

code { border-radius: 6px; }
kbd { background: var(--slate-5); border:1px solid var(--border); border-bottom-color: hsl(240 25% 32%); padding: 0 6px; border-radius: 6px; font-weight:700; box-shadow: inset 0 -1px 0 hsl(0 0% 100% / .06); }

/* 14) Utilities ------------------------------------------------------- */
.mt-0{ margin-top:0 } .mt-4{ margin-top:4px } .mt-8{ margin-top:8px } .mt-12{ margin-top:12px } .mt-16{ margin-top:16px }
.mb-0{ margin-bottom:0 } .mb-4{ margin-bottom:4px } .mb-8{ margin-bottom:8px } .mb-12{ margin-bottom:12px } .mb-16{ margin-bottom:16px }
.pt-8{ padding-top:8px } .pb-8{ padding-bottom:8px } .px-8{ padding-left:8px; padding-right:8px }
.flex{ display:flex } .items-center{ align-items:center } .justify-between{ justify-content:space-between } .justify-center{ justify-content:center }
.gap-4{ gap:4px } .gap-8{ gap:8px } .gap-12{ gap:12px } .gap-16{ gap:16px }
.hidden{ display:none }
.w-full{ width:100% }
.text-right{ text-align:right } .text-center{ text-align:center }
.nowrap{ white-space:nowrap }

.text-muted { color: var(--muted); }
.text-accent { color: var(--accent); }
.bg-surface { background: var(--surface); }
.border { border:1px solid var(--border); }
.round { border-radius: 999px; }

/* 15) Scrollbars ------------------------------------------------------ */
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-track { background: hsl(240 20% 12%); }
*::-webkit-scrollbar-thumb { background: hsl(240 20% 20%); border-radius: 8px; border: 1px solid hsl(240 25% 30%); }
*::-webkit-scrollbar-thumb:hover { background: hsl(240 20% 24%); }

/* 16) Animations ------------------------------------------------------ */
.fade-in { animation: fadeIn .24s var(--ease-2) both; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(4px) } to { opacity: 1; transform: none } }
.slide-up { animation: slideUp .28s var(--ease-2) both; }
@keyframes slideUp { from { opacity:0; transform: translateY(8px) } to { opacity:1; transform:none } }
.scale-in { animation: scaleIn .22s var(--ease-1) both; }
@keyframes scaleIn { from { opacity:0; transform: scale(.96) } to { opacity:1; transform: none } }

/* 17) Print / Prefs / A11y ------------------------------------------- */
@media print {
  body { background: #fff; color: #000; }
  .topnav, .sidebar, .toast, .dialog-backdrop, .dialog { display:none !important; }
  .card, .panel, .table-wrap { box-shadow: none; border-color: #aaa; }
}
@supports (backdrop-filter: blur(2px)) {
  .glass { background: hsl(0 0% 100% / .04); backdrop-filter: blur(6px); border:1px solid hsl(0 0% 100% / .08); }
}
@media (forced-colors: active) {
  * { forced-color-adjust: auto; }
  .btn, .pill { border-color: CanvasText; }
}

/* 18) Theme: Beige Sandstone ----------------------------------------- */
.theme-beige {
  --bg: hsl(38 45% 95%);
  --bg-2: hsl(38 60% 98%);
  --surface: hsl(37 44% 97%);
  --surface-2: hsl(35 38% 94%);
  --overlay: hsl(38 40% 96% / .9);
  --border: hsl(35 28% 78%);
  --line: hsl(36 22% 86%);
  --text: hsl(24 32% 16%);
  --muted: hsl(24 20% 40%);
  --accent: #2E6F40;
  --accent-2: #D66B5F;
  --ring: 0 0 0 3px rgba(46,111,64,.25);
  --shadow-1: 0 10px 18px rgba(139,97,60,.12);
  --shadow-2: 0 14px 28px rgba(139,97,60,.16);
}
.theme-beige body {
  background:
    radial-gradient(1200px 700px at 5% -10%, rgba(214,107,95,.10), transparent 55%),
    radial-gradient(1200px 680px at 110% 25%, rgba(46,111,64,.10), transparent 55%),
    linear-gradient(180deg, var(--bg-2), var(--bg));
  color: var(--text);
}
.theme-beige .card,
.theme-beige .panel,
.theme-beige .list .row,
.theme-beige .media,
.theme-beige .dropdown-menu,
.theme-beige .popover,
.theme-beige .dialog,
.theme-beige .table-wrap,
.theme-beige .chip,
.theme-beige .badge.neutral { background: var(--surface); border-color: var(--border); }
.theme-beige .topnav { background: linear-gradient(180deg, hsl(38 45% 96% / .92), hsl(38 42% 92% / .92)); border-bottom-color: var(--border); box-shadow: 0 6px 12px rgba(139,97,60,.10); }
.theme-beige thead th { background: var(--surface-2); color: var(--muted); }
.theme-beige tbody tr:hover { background: color-mix(in oklab, var(--accent) 12%, var(--surface)); }
.theme-beige .bar, .theme-beige .meter { background: hsl(38 35% 92%); border-color: var(--border); }
.theme-beige #chart { background:
  linear-gradient(hsl(38 45% 96%) 0 0),
  linear-gradient(transparent, transparent),
  repeating-linear-gradient(0deg, rgba(0,0,0,.03) 0 24px, transparent 24px 48px),
  repeating-linear-gradient(90deg, rgba(0,0,0,.02) 0 40px, transparent 40px 80px);
  border-color: var(--border);
}
.theme-beige svg text { fill: hsl(24 20% 40%); }
.theme-beige #legend .pill { background: var(--surface); border-color: var(--border); }

/* fixed: remove junk, keep green felt or swap to sand */
.theme-beige .felt {
  grid-column: 1 / 4;
  position: relative;
  width: 100%;
  border-radius: 999px;
  background:
    radial-gradient(520px 260px at 50% 28%, hsl(140 60% 65% / .82) 0%, hsl(140 52% 46% / .78) 60%),
    linear-gradient(180deg, hsl(142 34% 55%), hsl(142 36% 44%));
  border: 1px solid color-mix(in oklab, var(--accent) 45%, var(--border));
  padding: 24px;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.12), inset 0 -16px 32px rgba(0,0,0,.12);
}

.theme-beige .felt,
.theme-beige .felt .muted,
.theme-beige .felt .stack-tag,
.theme-beige .felt .mono,
.theme-beige .felt .sb-zone .muted,
.theme-beige .felt .bb-zone .muted {
  color: hsl(32 40% 22%);
  text-shadow: none;
  font-weight: 700;
}

.theme-beige .felt .stack-tag {
  background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,219,160,.72));
  border-color: color-mix(in oklab, var(--accent) 30%, var(--border));
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
}

.theme-beige .felt .sb-zone,
.theme-beige .felt .bb-zone {
  background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,219,160,.7));
  border-color: color-mix(in oklab, var(--accent) 24%, var(--border));
}

.theme-beige [data-tip]::after { background: var(--surface); border-color: var(--border); color: var(--text); }
.theme-beige .dialog-backdrop { background: hsl(38 30% 30% / .35); }
.theme-beige .btn.ghost:hover { background: hsl(38 35% 94%); border-color: var(--border); }
.theme-beige .pagination .page[aria-current="page"],
.theme-beige .sidebar a.active { background: var(--surface-2); border-color: color-mix(in oklab, var(--accent) 35%, var(--border)); }
.theme-beige .skeleton { background: hsl(38 35% 94%); }
.theme-beige .skeleton::after { background: linear-gradient(90deg, transparent, rgba(0,0,0,.06), transparent); }
.theme-beige *::-webkit-scrollbar-track { background: hsl(38 35% 90%); }
.theme-beige *::-webkit-scrollbar-thumb { background: hsl(38 28% 72%); border-color: hsl(38 28% 70%); }
.theme-beige *::-webkit-scrollbar-thumb:hover { background: hsl(38 28% 66%); }
.theme-beige .steps .dot.active { background: var(--accent); border-color: transparent; box-shadow: 0 0 0 3px color-mix(in oklab, var(--accent) 25%, #fff); }
/* --- Leaderboard playstyle grid (back) --- */
.matches-wrap { display:flex; align-items:center; justify-content:space-between; gap: 8px; }
.matches-num  { display:inline-block; min-width: 64px; text-align:right; }

.style-grid {
  display:grid;
  grid-template-columns: repeat(2, 8px);
  grid-auto-rows: 8px;
  gap: 2px; padding: 3px;
  border-radius: 6px;
  border: 1px solid var(--border);
  background: hsl(240 18% 12% / .9);
}
.style-grid .sq { width: 8px; height: 8px; border-radius: 2px; background: hsl(240 16% 24% / .8); opacity: .55; }

.style-grid.lg { grid-template-columns: repeat(2, 18px); grid-auto-rows: 18px; gap: 6px; padding: 6px; border-width: 2px; }
.style-grid.lg .sq { width: 18px; height: 18px; }

/* highlight quadrant by style */
.style-grid[data-style="LAG"]  .sq:nth-child(1),
.style-grid[data-style="TAG"]  .sq:nth-child(2),
.style-grid[data-style="FISH"] .sq:nth-child(3),
.style-grid[data-style="NIT"]  .sq:nth-child(4) { opacity: 1; box-shadow: inset 0 0 0 1px rgba(255,255,255,.10); }

/* color accents */
.style-grid[data-style="LAG"]  .sq:nth-child(1) { background: hsl(28 90% 58%); }
.style-grid[data-style="TAG"]  .sq:nth-child(2) { background: hsl(152 60% 44%); }
.style-grid[data-style="FISH"] .sq:nth-child(3) { background: hsl(2 72% 54%); }
.style-grid[data-style="NIT"]  .sq:nth-child(4) { background: hsl(215 62% 56%); }

.style-chip { display:inline-flex; align-items:center; gap:8px; padding:6px 12px; border-radius: 10px; font-weight:900; letter-spacing:.3px; background: linear-gradient(90deg, hsl(28 90% 58% / .25), hsl(215 62% 56% / .25)); border:1px solid var(--border); }
.tooltip-pop{position:absolute;display:none;min-width:240px;z-index:70;
  background:var(--surface);border:1px solid var(--border);border-radius:10px;
  box-shadow:var(--shadow-2);padding:10px}
.tooltip-pop.show{display:block}
.tooltip-pop .title{font-weight:800;margin-bottom:4px}
.tooltip-pop .body{color:var(--muted);font-size:var(--fs-1)}
.tooltip-pop .close{position:absolute;top:6px;right:8px;background:transparent;border:0;
  font-size:18px;line-height:1;cursor:pointer;color:var(--text)}

/* Sort chevron fix (ensure visible and consistent) */
.lb-table thead th.sortable{ padding-right: 22px; position: relative }
.lb-table thead th.sortable::after{ content: '⇅'; position:absolute; right:6px; top:50%; transform: translateY(-50%); opacity:.85; font-size:12px; color: var(--muted) }
.lb-table thead th.sortable[data-dir="asc"]::after{ content:'▲' }
.lb-table thead th.sortable[data-dir="desc"]::after{ content:'▼' }


/* Elo chart ----------------------------------------------------------- */
.elo-card {
  padding: 0;
  border-radius: 30px;
  border: 1px solid rgba(123, 180, 255, .24);
  background:
    radial-gradient(140% 150% at 88% 0%, rgba(77, 246, 180, .2), transparent 70%),
    radial-gradient(160% 140% at 10% 0%, rgba(118, 177, 255, .2), transparent 72%),
    linear-gradient(180deg, rgba(12, 18, 34, .96), rgba(6, 10, 20, .94));
  box-shadow: 0 44px 82px rgba(4, 12, 24, .6);
  overflow: hidden;
  backdrop-filter: blur(8px);
  display: flex;
  flex-direction: column;
}
.elo-card__header {
  display: flex;
  align-items: flex-end;
  justify-content: space-between;
  gap: 24px;
  padding: 32px 40px 28px;
  background: linear-gradient(180deg, rgba(8, 16, 30, .9), rgba(8, 14, 26, .76));
  border-bottom: 1px solid rgba(123, 180, 255, .28);
  flex-wrap: wrap;
}
.elo-card__header h1 { margin-bottom: 8px; }
.elo-card__filters {
  display: flex;
  justify-content: flex-end;
  align-items: flex-start;
  flex: 1;
}
.filter-chips {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: flex-end;
}
.filter-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 9px 16px;
  border-radius: 999px;
  border: 1px solid rgba(132, 196, 255, .32);
  background: rgba(10, 24, 42, .7);
  color: rgba(204, 224, 255, .9);
  font-size: .86rem;
  font-weight: 600;
  letter-spacing: .2px;
  cursor: pointer;
  transition:
    transform var(--dur-1) var(--ease-2),
    box-shadow var(--dur-1) var(--ease-2),
    border-color var(--dur-1) var(--ease-2),
    background var(--dur-1) var(--ease-2);
}
.filter-chip .filter-chip__content {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}
.filter-chip .org-icon {
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.filter-chip .org-icon img,
.filter-chip .org-icon svg {
  width: 100%;
  height: 100%;
}
.filter-chip .filter-chip__text { white-space: nowrap; }
.filter-chip .filter-chip__dot {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  background: linear-gradient(135deg, rgba(118, 177, 255, .85), rgba(77, 246, 180, .78));
  box-shadow: 0 0 0 2px rgba(0, 0, 0, .28);
}
.filter-chip:hover {
  transform: translateY(-1px);
  border-color: rgba(132, 196, 255, .5);
  background: rgba(16, 34, 58, .78);
  box-shadow: 0 14px 30px rgba(0, 0, 0, .35);
}
.filter-chip.active {
  color: #07101c;
  background: linear-gradient(90deg, rgba(118, 177, 255, .95), rgba(77, 246, 180, .88));
  border-color: transparent;
  box-shadow: 0 20px 40px rgba(26, 140, 255, .35);
}
.filter-chip.active .filter-chip__text { font-weight: 700; }
.filter-chip:focus-visible { outline: none; box-shadow: var(--ring); }
.elo-card__body {
  padding: 32px 40px 40px;
  display: grid;
  gap: 28px;
}
.elo-chart {
  position: relative;
  border-radius: 26px;
  background:
    radial-gradient(140% 180% at 6% 0%, rgba(97, 188, 255, .18), transparent 70%),
    radial-gradient(160% 180% at 96% 18%, rgba(77, 246, 180, .2), transparent 68%),
    linear-gradient(180deg, rgba(8, 18, 32, .95), rgba(8, 14, 26, .92));
  border: 1px solid rgba(118, 177, 255, .3);
  padding: 32px;
  overflow: hidden;
}
.elo-chart svg {
  width: 100%;
  height: auto;
  min-height: 460px;
  display: block;
  filter: drop-shadow(0 18px 34px rgba(0, 0, 0, .45));
  touch-action: none;
}
.chart-crosshair {
  stroke: rgba(255,255,255,.32);
  stroke-dasharray: 4 4;
  pointer-events: none;
}
.chart-marker {
  fill: rgba(255,255,255,.95);
  stroke-width: 3;
  stroke: currentColor;
  filter: drop-shadow(0 0 8px rgba(0,0,0,.35));
  pointer-events: none;
}
.chart-tooltip {
  position: absolute;
  min-width: 220px;
  border-radius: 16px;
  padding: 16px 18px;
  background: linear-gradient(180deg, rgba(10,18,28,.95), rgba(14,26,42,.94));
  border: 1px solid rgba(132, 196, 255, .32);
  box-shadow: 0 22px 38px rgba(0,0,0,.45);
  color: #f5fbff;
  pointer-events: none;
  transform: translate(-50%, calc(-100% - 18px));
  opacity: 0;
  visibility: hidden;
  transition: opacity .18s var(--ease-2), visibility .18s var(--ease-2);
  z-index: 5;
}
.chart-tooltip.visible {
  opacity: 1;
  visibility: visible;
}
.chart-tooltip__time {
  font-weight: 700;
  letter-spacing: .35px;
  margin-bottom: 8px;
}
.chart-tooltip__series {
  display: grid;
  gap: 8px;
}
.chart-tooltip__row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 16px;
  font-size: 0.92rem;
}
.chart-tooltip__label {
  display: inline-flex;
  align-items: flex-start;
  gap: 10px;
  color: rgba(230, 244, 255, .86);
  min-width: 0;
}
.chart-tooltip__text {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  min-width: 0;
}
.chart-tooltip__names {
  display: flex;
  flex-direction: column;
  gap: 2px;
  line-height: 1.2;
  min-width: 0;
}
.chart-tooltip__model {
  font-weight: 700;
  white-space: nowrap;
}
.chart-tooltip__company {
  font-size: .7rem;
  text-transform: uppercase;
  letter-spacing: .35px;
  color: rgba(230, 244, 255, .65);
}
.chart-tooltip__value {
  font-variant-numeric: tabular-nums;
  font-weight: 600;
  color: #ffffff;
}
.chart-bullet {
  width: 10px;
  height: 10px;
  border-radius: 999px;
  box-shadow: 0 0 0 2px rgba(0,0,0,.35);
  flex-shrink: 0;
}
.chart-legend {
  display: grid;
  gap: 16px;
  padding: 24px 26px;
  border-radius: 26px;
  background: linear-gradient(180deg, rgba(10, 18, 32, .9), rgba(6, 12, 24, .9));
  border: 1px solid rgba(123, 180, 255, .24);
  box-shadow: 0 30px 60px rgba(4, 12, 24, .48);
  margin-top: 0;
  align-self: stretch;
  max-height: 100%;
  overflow-y: auto;
}
.chart-legend__item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  border-radius: 16px;
  background: rgba(255, 255, 255, .04);
  color: rgba(230, 240, 255, .9);
  border: 1px solid rgba(123, 180, 255, .16);
  min-width: 0;
}
.chart-legend__swatch {
  width: 12px;
  height: 12px;
  border-radius: 999px;
  box-shadow: 0 0 0 2px rgba(0,0,0,.2);
  background: var(--legend-color, rgba(118, 177, 255, .92));
}
.chart-legend__label {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}
.chart-legend__label .org-icon {
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}
.chart-legend__label .org-icon img,
.chart-legend__label .org-icon svg {
  width: 100%;
  height: 100%;
}
.chart-legend__text {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}
.chart-legend__model {
  font-weight: 700;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: #f6fbff;
}
.chart-legend__company {
  font-size: .7rem;
  text-transform: uppercase;
  letter-spacing: .38px;
  color: rgba(196, 216, 255, .68);
}

@media (min-width: 1280px) {
  .elo-card__body {
    grid-template-columns: minmax(0, 3fr) minmax(0, 1.1fr);
    align-items: stretch;
  }
  .chart-legend {
    grid-template-columns: 1fr;
  }
}

@media (max-width: 1024px) {
  .elo-card__filters { justify-content: flex-start; }
  .filter-chips { justify-content: flex-start; }
}
@media (max-width: 820px) {
  .elo-card__body { padding: 24px; }
  .elo-chart { padding: 22px; }
  .elo-chart svg { min-height: 360px; }
  .chart-legend { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }
}
@media (max-width: 640px) {
  .elo-card__header { flex-direction: column; align-items: flex-start; }
  .elo-card__filters { width: 100%; }
  .filter-chips { width: 100%; justify-content: flex-start; }
}

/* Replay: prevent long model names from breaking layout */
#turn { max-width: 48ch; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#map .pill { max-width: 52ch; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
#sbZone .muted, #bbZone .muted { max-width: 90%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; display:block }
/* Replay controls responsiveness to avoid overlaps */
.controls > * { min-width: 0; }
#status { max-width: 24ch; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
@media (max-width: 900px) {
  .controls { grid-template-columns: 1fr 1fr; }
  #turn { grid-column: 1 / -1; justify-self: start; }
}

/* Final override: never hide chevrons */
.lb-table thead th.sortable{ padding-right: 24px !important; position: relative; z-index: 2; }
.lb-table thead th.sortable::after{ content: '⇅' !important; opacity: 1 !important; color: var(--muted) !important; right: 6px !important; }
.lb-table thead th.sortable[data-dir="asc"]::after{ content:'▲' !important; }
.lb-table thead th.sortable[data-dir="desc"]::after{ content:'▼' !important; }
